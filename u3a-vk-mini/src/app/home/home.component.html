<div class="home-container">
  <!-- –•–µ–¥–µ—Ä -->
  <header class="header">
    <div class="header-row">
      @if (user(); as currentUser) {
        <div class="user-info">
          @if (currentUser.photo_200) {
            <img [src]="currentUser.photo_200" [alt]="currentUser.first_name" class="user-avatar">
          } @else {
            <div class="user-avatar-placeholder">
              {{ currentUser.first_name.charAt(0) }}{{ currentUser.last_name.charAt(0) }}
            </div>
          }
          <div class="user-name-wrap">
            <div class="user-fullname">{{ currentUser.first_name }} {{ currentUser.last_name }}</div>
            <div class="user-username">&#64;username</div>
          </div>
        </div>
      } @else {
        <div class="user-info">
          <div class="user-avatar-placeholder">U3</div>
          <div class="user-name-wrap">
            <div class="user-fullname">–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç —Ç—Ä–µ—Ç—å–µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞</div>
            <div class="user-username">&#64;guest</div>
          </div>
        </div>
      }
      <button class="icon-button" aria-label="–ú–µ–Ω—é" (click)="onNavigateToProfile()">‚ò∞</button>
    </div>

    <!-- –ü–æ–∏—Å–∫ -->
    <div class="search-bar">
      <span class="search-icon">üîé</span>
      <input class="search-input" type="search" placeholder="–Ω–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞, —Ç–µ–º–∞..." />
    </div>
  </header>

  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="main-content">
    <h2 class="section-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>

    <section class="stats-card">
      <div class="stats-title">–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å</div>

      <div class="progress-row">
        <div class="progress-label">–ü—Ä–æ–π–¥–µ–Ω–æ –ª–µ–∫—Ü–∏–π</div>
        <div class="progress-value">{{ lecturesProgress }}%</div>
      </div>
      <div class="progress">
        <div class="progress-track"></div>
        <div class="progress-fill" [style.width.%]="lecturesProgress"></div>
      </div>

      <div class="progress-row">
        <div class="progress-label">–ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</div>
        <div class="progress-value">{{ correctAnswers }}%</div>
      </div>
      <div class="progress">
        <div class="progress-track"></div>
        <div class="progress-fill success" [style.width.%]="correctAnswers"></div>
      </div>

      <button class="primary-button" (click)="onNavigateToProgress()">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
    </section>

    <h2 class="section-title">–ö—É—Ä—Å—ã</h2>

    <div class="tabs">
      <button class="tab" [class.active]="selectedTab==='for-you'" (click)="selectedTab='for-you'">–î–ª—è –í–∞—Å</button>
      <button class="tab" [class.active]="selectedTab==='new'" (click)="selectedTab='new'">–ù–æ–≤—ã–µ –∫—É—Ä—Å—ã</button>
      <button class="tab" [class.active]="selectedTab==='fav'" (click)="selectedTab='fav'">–ò–∑–±—Ä–∞–Ω–Ω—ã–µ</button>
    </div>

    <div class="courses-list">
      @for (course of courses; track course.id) {
        <article class="course-card">
          <div class="course-cover"></div>
          <div class="course-info">
            <div class="course-title">{{ course.title }}</div>
            <div class="course-meta">1‚Äì2 —á–∞—Å–æ–≤ –≤ –Ω–µ–¥–µ–ª—é</div>
          </div>
          <button class="icon-like" aria-label="–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">‚ô°</button>
        </article>
      }
    </div>
  </main>

  <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
  <nav class="bottom-nav">
    <button class="nav-item active" aria-label="–ì–ª–∞–≤–Ω–∞—è">üè†</button>
    <button class="nav-item" aria-label="–ö—É—Ä—Å—ã" (click)="onNavigateToCourses()">üìö</button>
    <button class="nav-item" aria-label="–ò–∑–±—Ä–∞–Ω–Ω–æ–µ">‚≠ê</button>
    <button class="nav-item" aria-label="–ü—Ä–æ—Ñ–∏–ª—å" (click)="onNavigateToProfile()">üë§</button>
  </nav>

  <!-- –°—Ç–∞—Ç—É—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ -->
  @if (!isInitialized()) {
    <div class="loading-overlay">
      <div class="loading-spinner"></div>
      <p>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</p>
    </div>
  }
</div>
